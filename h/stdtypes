/* Copyright 1998 Acorn Computers Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*
*
*     STDTYPES.H - Header for standard types
*
*     05-02-92 INH    Original
*
*/

#ifndef STDTYPES_H_
#define STDTYPES_H_

#include <stdint.h>
#include <stdbool.h>
#include <sys/types.h>
#include <sys/errno.h>

#include "kernel.h"

#define DEBUGLIB_NOBRACKETS
#include "DebugLib/DebugLib.h"

/* Redefine panic() and printf() as DebugLib dprintf() */

#define printf(...) dprintf(__FILE__, __VA_ARGS__)
#define panic(...) dprintf(__FILE__, __VA_ARGS__)

#define __P(protos)     protos

#if defined(__CC_NORCROFT)
#define SMB_PACKED __packed
#else
#define SMB_PACKED __attribute__((__packed__))
#endif

/* For RISCOS */
typedef int err_t;

#define min(a,b)  ((a)<(b) ? (a):(b))
#define max(a,b)  ((a)>(b) ? (a):(b))

/* Return error codes */
#define  OK               0
#define  EHOWDTHATHAPPEN  0
#define  EBADPARAM        1
#define  EOUTOFMEM        3
#define  ELINKFAILED      4
#define  ENOHANDLES       5
#define  ERXNOTREADY      6
#define  ETIMEOUT         8
#define  ENAMEEXISTS      9
#define  ECANTFINDNAME    10
#define  EDATALEN         11

/* Installation errors */
#define  ECMDLINE         36
#define  ERISCOSVER       37
#define  EINITFAILED      38
#define  ECONNEXISTS      42
#define  EMBUFMODULE      44

#define  ERPCERROR        45
#define  EDISCFULL        46
#define  EDIRNOTEMPTY     47
#define  EBADRENAME       48
#define  EFILEHANDLE      49

/* NetBIOS-over-IP errors */
#define  ECREATESOCKET    50
#define  ECONNECTSOCKET   51
#define  ECONNREJECT      52
#define  ERETARGET        53
#define  ENOIFADDR        54
#define  ENOSOCKETS       55

/* More errors */
#define  EBOOTREENTRY     56
#define  EBOOTERROR       57
#define  EHOMEDIRNAME     58
#define  EHOMEDIRCONN     59
#define  EUSERUNKNOWN     60
#define  EACCDISABLED     61
#define  ELANMANFSINUSE   62

#define  EUSELASTSETOSERR 0x10000 /* Signifies non-LanMan error */

#define  OPEN_READ        0
#define  OPEN_WRITE       1
#define  OPEN_READWRITE   2

/* DOS attributes */
#define ATTR_NORM 0
#define ATTR_RO   1
#define ATTR_HID  2
#define ATTR_SYS  4
#define ATTR_VOL  8
#define ATTR_DIR  0x10
#define ATTR_ARC  0x20

typedef struct
{
  int  attr;
  uint utime;
  int  length;
  int  riscos_type;
} DOS_ATTRIBS;

/* RISCOS attributes */
#define ROA_READ   ((1<<0) | (1<<4))
#define ROA_WRITE  2
#define ROA_LOCKED 8

typedef struct
{
  uint  loadaddr;
  uint  execaddr;
  uint  flags;
} RISCOS_ATTRIBS;

/* TODO: move this somewhere appropriate */

typedef struct
{
  const char *uti_name;
  const char **extensions;
  uint32_t num_extensions;
  uint32_t riscos_type;
  char base_type;
} UniformTypeIdentMap;

#endif  /* STDTYPES_H_ */
